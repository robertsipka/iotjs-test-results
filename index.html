<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>IoT.js test results</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
  <link rel="stylesheet" href="css/c3.css">
  <link rel="stylesheet" href="css/chart.css">
  <link rel="stylesheet" href="css/infobox.css">
  <link rel="stylesheet" href="css/pagination.css">
  <link rel="stylesheet" href="css/testruns.css">
  <link id="css-dynamic" rel="stylesheet" href="css/device_stm32.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script src="js/third-party/c3/c3.min.js"></script>
  <script src="js/third-party/c3/d3.v3.min.js"></script>
  <script src="js/chart_settings.js"></script>
  <script src="js/load_jsons.js"></script>
  <script src="js/render_entries.js"></script>

  <style>
    body { padding-top: 70px; }
  </style>
</head>
<body>

<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://iotjs.net"><b>IoT.js</b></a>
    </div>
    <div id="navbar" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li id="show-stm32" class="active"><a href="#">STM32</a></li>
        <li id="show-rpi2"><a href="#">Raspberry Pi2</a></li>
        <li id="show-artik053"><a href="#">Artik 053</a></li>
        <li><a href="http://github.com/Samsung/iotjs">View on Github</a></li>
        <li><a href="http://www.jerryscript.net">Powered by <b>JerryScript</b></a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container infobox">
  <div class="row">
    <div class="col-sm-8 col-md-7">
      <img id="info-image">
      <div>
        <p><span class="bold">Test device:</span><a id="info-device"></a></p>
        <p><span class="bold">Platform:</span><a id="info-platform"></a></p>
        <p><span class="bold">Repository:</span><a href="https://github.com/Samsung/iotjs">IoT.js master branch</a></p>
      </div>
    </div>
  </div>
</div>

<div class="container chart-wrapper">
  <div class="row">
    <div class="row">
      <div class="col-md-12">
        <p>Date range from <input type="text" class="form-control" id="chart-datepicker-from"> to <input type="text" class="form-control" id="chart-datepicker-to"></p>
      </div>
    </div>
    <div class="col-md-6">
      <div id="binary-chart"></div>
    </div>
    <div class="col-md-6">
      <div id="memory-chart"></div>
    </div>
    <button type="button" class="btn btn-info btn-sm" data-toggle="modal" data-target="#myModal">Chart info</button>
    <a class="btn btn-info btn-sm" href="chart-info.html" role="button">Chart info</a>
  </div>
</div>

<div class="container">
<div class="pagination top"></div>
<div id="loading"><p>Loading...</p></div>
<div id="testruns"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script type="text/javascript">
  $('#show-stm32').click(function(event){ change_device("stm32"); });
  $('#show-rpi2').click(function(event){ change_device("rpi2"); });
  $('#show-artik053').click(function(event){ change_device("artik053"); });
</script>




    <!-- Modal -->
    <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Chart Info</h4>
          </div>
          <div class="modal-body">
            <p><strong>Binary size</strong></p>
            <p> A typical binary application has four main sections: </p>
            <ul>
              <li>.text - contains the compiled code</li>
              <li>.rodata - contains the read only data</li>
              <li>.data - contains the initialized read / write data</li>
              <li>.bss - contains the uninitialized read / write data</li>
            </ul>
            <p> The space occupied by the application is the sum of the first three sections, since .bss is simply initialized with zero. The binary size chart shows the sum of the first three sections which is the required flash memory (disk) space for IoT.js. </p>
            <p> On TizenRT operating system the system and all applications are compiled into a single binary. The space consumed by IoT.js is calculated from the linker map file generated by the compiler. </p>

            <p><strong>Memory measurement setup</strong></p>
            <p> IoT.js has three major components: </p>
            <ul>
              <li>IoT.js core</li>
              <li>libtuv</li>
              <li>JerryScript</li>
            </ul>
            <p>The core and libtuv uses the system malloc for allocating memory. However, JerryScript has an own optimized memory allocator with zero allocation overhead (i.e. does not allocate extra space for allocated blocks), so the whole memory area can be allocated by the application. The JerryScript allocator uses a contiguous memory block called JerryScript heap which size can be specified at compile time. The test system uses a 60 KByte JerryScript heap which is enough to run the IoT.js tests. </p>
            <p>The stack consumption is also important on low-end systems. The test runner currently requires 16 KByte stack memory to run IoT.js tests.</p>
            <p>The average memory chart shows the average memory consumption which is computed by adding the memory allocated by malloc and JerryScript plus the stack size. </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>



</body>
</html>
